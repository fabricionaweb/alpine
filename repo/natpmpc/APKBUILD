# Maintainer: Baptiste Jonglez <baptiste--aur@jonglez.org>
# Contributor: Anatol Pomozov <anatol.pomozov@gmail>
# Contributor: Gustavo Alvarez <s1pkn07@gmail.com>
# Contributor: Kristjan Reinloo <mail@kreinloo.net>
# Contributor: Pierre Bourdon <delroth@gmail.com>
pkgname=natpmpc
pkgver=20150609
pkgrel=0
pkgdesc="A portable and fully compliant implementation of the NAT-PMP protocol"
arch="x86_64"
url="http://miniupnp.free.fr/libnatpmp.html"
license="BSD"
options="!check" # no tests
depends="gcompat"
makedepends="gcc"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://miniupnp.tuxfamily.org/files/libnatpmp-$pkgver.tar.gz"
builddir="$srcdir/libnatpmp-$pkgver"

prepare() {
	sed -e 's/CFLAGS = /CFLAGS += /' -i Makefile
}

build() {
	make
}

package() {
	make INSTALLPREFIX="$pkgdir/usr" INSTALLDIRINC="$pkgdir/usr/include" install

	install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname
	install -Dm644 natpmpc.1 -t "$pkgdir"/usr/share/man/man1
}

sha512sums="
e50b1f68ce9254bb2f068ddc37417a3c417b80f7b3fb3d84e3e9af4a144d89e204ab993b54c01657335e855d0124a8fcbbf96ce78db7b9ae0b03b6eb79de2e09  natpmpc-20150609.tar.gz
"
